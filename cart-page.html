<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee shop</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Karla:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header"></header>
    <nav>
        <div class="navigation"> 
            <a href="home-page.html"><img src="assets/icons/logo.png" alt="logo" class="logo"></a>
            <div class="nav-right">
                
                <div class="search-wrapper" >
                    <div class="search" id="searchTrigger">
                        <img src="assets/icons/search_50dp_000000_FILL0_wght200_GRAD200_opsz48.png" alt="profile" class="nav-buttons">
                    </div>
                    <div class="search-text">
                        Search
                    </div>
                </div>

                <div class="register-wrapper">
                    <div class="register">
                        <img src="assets/icons/person_50dp_000000_FILL0_wght200_GRAD200_opsz48.png" alt="profile" class="nav-buttons">
                    </div>
                    <div class="register-text">
                        Register
                    </div>
                </div>

                <div class="cart-wrapper">
                    <div class="cart">
                        <img src="assets/icons/shopping_bag_50dp_000000_FILL0_wght200_GRAD200_opsz48.png" alt="cart" class="nav-buttons" data-cart>
                    </div>
                    <div class="cart-text">
                        Cart
                    </div>

                    <div data-cartCount></div>
                </div>

            </div>

            <div class="search-overlay" id="searchOverlay">
                <div class="search-container">
                    <div class="search-field">
                    <input type="text" placeholder="Search..." id="searchInput" autofocus />
                    <button class="search-btn" data-searchBtn><img src="assets/icons/search_50dp_000000_FILL0_wght200_GRAD200_opsz48.png" alt="search" class="nav-buttons"></button>
                    </div>
                    <button class="close-btn" id="closeSearch">✕</button>
                </div>
            </div>
            
        </div>
       
        <div class="nav-menu">
            <div class="hover-navlink"><a href="home-page.html">Home</a></div>
            <div class="hover-navlink"><a href="">Contact us</a></div>
            <div class="hover-navlink"><a href="booking.html">Reservation</a></div>
            
            
            <div class="navdropdown-products" id="dropDown">
                <li class="hover-dropdown">
                    Shop 
                <img src="assets/icons/keyboard_arrow_down_20dp_000000_FILL0_wght300_GRAD200_opsz20.png" alt="drop down" class="arrowIcon">
                </li>
                <div class="navdropdown-box">
                    <div class="dropdown-left">
                        <h2>Shop</h2>
                        <ul>
                            <li class="dropdown-hover"><a href="products.html?category=coffee" >Coffe menu</a></li>
                            <li class="dropdown-hover"><a href="products.html?category=beans" >Coffee beans</a></li>
                            <li class="dropdown-hover"><a href="products.html?category=espresso+machine" >Espresso machine</a></li>
                        </ul>
                    </div>

                    <div class="dropdown-right">
                        <div class="card">
                            <a href="products.html?category=coffee">
                                <img src="assets/images/coffee.jpg" alt="coffee">
                                <p>Coffee</p>
                            </a>
                        </div>

                        <div class="card">
                            <a href="products.html?category=beans">
                                <img src="assets/images/beans.jpg" alt="beans">
                                <p>Beans</p>
                            </a>
                        </div>

                        <div class="card">
                            <a href="products.html?category=espresso machine">
                                <img src="assets/images/espresso_machine.jpg" alt="espresso_machine">
                                <p>Espresso Machines</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
           
            
        </div>
        
    </nav>  
    

    <div class="cart-title" ><h4 data-cartTitle></h4></div>

    <div class="cart-columns container-sm" data-cartColums>
        <div class="row mb-3 text-center fw-bold">
            <div class="col-6 col-sm-6 text-start">Item</div>
            <div class="col-2 col-sm-2">Price</div>
            <div class="col-2 col-sm-2 text-lg-center">Quantity</div>
            <div class="col-2 col-sm-2 text-end">Total</div>
        </div>
    </div>

   <div class="cart-list container-sm pt-2" data-cartList>
        
    </div>

    <div class="container-sm float-end" data-totalBox>
        <div class="row mb-3 align-items-center rows">
            <div class="col-6 col-md-6">Subtotal:</div>
            <div class="col-6 col-md-6 text-end" data-subtotal></div>
        </div>

        <div class="row mb-3 align-items-center rows">
            <div class="col-6 col-md-6">Sale Tax:</div>
            <div class="col-6 col-md-6 text-end" data-saleTax></div>
        </div>

        <div class="row mb-3 align-items-center fw-bold rows">
            <div class="col-6 col-md-6">Grand Total:</div>
            <div class="col-6 col-md-6 text-end" data-grandTotal></div>
        </div>

        <div class="row mb-1 align-items-center">
            <button class="col-12 col-md-12" data-checkoutBtn>Check out</button>
        </div>
    </div>

    <template data-cartTemplate>
        <div class="row mb-3 align-items-start">
            <div class="col-6 col-sm-6">
            <div class="d-flex flex-column flex-md-row gap-2 ">

                <img src="" alt="" class="cart-img" data-cartImg>

                <div class="d-flex flex-column">
                <span data-name></span>
                <a href="" data-brief>
                </a>
                </div>
            </div>
            </div>

            <div class="col-2 col-sm-2 text-center">
            <span data-price></span>
            </div>

            <div class="col-2 col-sm-2 text-center">
            <input type="number" readonly data-quantity value="" min="1"></input>
            </div>

            <div class="col-2 col-sm-2 text-end">
            <span data-total>500.00</span>
            <span data-removeItem>✕</span>
            </div>

            
        </div>
    </template>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
    <script src="scripts/cart.js" type="module"></script>
    <script>

    let lastScrollTop = 0;
    const nav = document.querySelector("nav");

    window.addEventListener("scroll", function () {
        let currentScroll = window.pageYOffset || document.documentElement.scrollTop;

        if (currentScroll < lastScrollTop) {
            // Scrolling up
            nav.style.top = "0";
        } else {
            // Scrolling down
            nav.style.top = "-150px"; // hides the nav (adjust if your nav height is different)
        }

        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // For Mobile or negative scrolling
    });
    let hidden = true;
    const dropdDown = document.getElementById("dropDown")
    const hoverDropdown = dropdDown.querySelector(".hover-dropdown");
    hoverDropdown.addEventListener("click", () => {
        const dropDownBox = dropdDown.querySelector(".navdropdown-box");
        if (hidden){
            
            dropDownBox.classList.toggle("navdropdown-box-show");
            dropdDown.querySelector('.arrowIcon').src = "assets/icons/keyboard_arrow_up_20dp_000000_FILL0_wght400_GRAD0_opsz20.png"
            hidden = false;
        } else {
            dropDownBox.classList.toggle("navdropdown-box-show");
            dropdDown.querySelector('.arrowIcon').src = "assets/icons/keyboard_arrow_down_20dp_000000_FILL0_wght300_GRAD200_opsz20.png"
            hidden = true;
        }
        
    })

    const searchTrigger = document.getElementById('searchTrigger');
    const searchOverlay = document.getElementById('searchOverlay');
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.querySelector('[data-searchBtn]')
    const closeBtn = document.getElementById('closeSearch');

    searchTrigger.addEventListener('click', () => {
        searchOverlay.style.top = "0";
        setTimeout(() => {
            searchInput.focus();
        }, 300); // Wait for slide-in animation
    });

    closeBtn.addEventListener('click', () => {
        searchOverlay.style.top = "-100px";
    });

    

    searchInput.addEventListener('focus', () => {
        window.addEventListener('keydown', (e) => {
            if (e.key === "Enter"){
            search();   
            }
        })
    });

    searchBtn.addEventListener("click", () => {
        search();
    })

    function search(){
        if (searchInput.value === ""){
                    return;
        }
        const search = searchInput.value.split(" ").join("+");
        const url = `search-page.html?search=${search}`;
        window.location.href = url;
    }

    const cartBtn = document.querySelector("[data-cart]");
    cartBtn.addEventListener("click", () => {
        window.location.href = "cart-page.html"
    })

    const cart = JSON.parse(localStorage.getItem("cartData")) || []
    const cartCount = document.querySelector("[data-cartCount]");
    cartCount.textContent = cart.length;
    </script>
</body>
</html>